(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5311:function(e,t,s){Promise.resolve().then(s.bind(s,4778))},4778:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return X}});var r=s(3827),a=s(4090),i=s(9143),l=s(9769),o=s(3167),d=s(1367);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.m6)((0,o.W)(t))}let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:o=!1,...d}=e,u=o?i.g7:"button";return(0,r.jsx)(u,{className:n(c({variant:a,size:l,className:s})),ref:t,...d})});u.displayName="Button";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:n("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});f.displayName="Card";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:n("flex flex-col space-y-1.5 p-6",s),...a})});m.displayName="CardHeader";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:n("text-2xl font-semibold leading-none tracking-tight",s),...a})});p.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:n("text-sm text-muted-foreground",s),...a})}).displayName="CardDescription";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:n("p-6 pt-0",s),...a})});x.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:n("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter";let h=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:n("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});h.displayName="Input";var g=s(4602);let b=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(g.f,{ref:t,className:n(b(),s),...a})});y.displayName=g.f.displayName;let v=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:n("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a})});v.displayName="Textarea";var j=s(5281),N=s(4995);let w=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(j.fC,{ref:t,className:n("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:(0,r.jsx)(j.z$,{className:n("flex items-center justify-center text-current"),children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})})});w.displayName=j.fC.displayName;let k=0,T=new Map,S=e=>{if(T.has(e))return;let t=setTimeout(()=>{T.delete(e),A({type:"REMOVE_TOAST",toastId:e})},1e6);T.set(e,t)},C=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?S(s):e.toasts.forEach(e=>{S(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},_=[],I={toasts:[]};function A(e){I=C(I,e),_.forEach(e=>{e(I)})}function O(e){let{...t}=e,s=(k=(k+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>A({type:"DISMISS_TOAST",toastId:s});return A({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>A({type:"UPDATE_TOAST",toast:{...e,id:s}})}}var E=s(613),R=s(6790),D=s(3090),Z=s(8808),z=s(142),F=s(4703),M=s(844);let L=z.fC;z.ZA;let P=z.B4,J=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,r.jsxs)(z.xz,{ref:t,className:n("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[a,(0,r.jsx)(z.JO,{asChild:!0,children:(0,r.jsx)(F.Z,{className:"h-4 w-4 opacity-50"})})]})});J.displayName=z.xz.displayName;let V=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(z.u_,{ref:t,className:n("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(M.Z,{className:"h-4 w-4"})})});V.displayName=z.u_.displayName;let H=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(z.$G,{ref:t,className:n("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(F.Z,{className:"h-4 w-4"})})});H.displayName=z.$G.displayName;let B=a.forwardRef((e,t)=>{let{className:s,children:a,position:i="popper",...l}=e;return(0,r.jsx)(z.h_,{children:(0,r.jsxs)(z.VY,{ref:t,className:n("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,r.jsx)(V,{}),(0,r.jsx)(z.l_,{className:n("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(H,{})]})})});B.displayName=z.VY.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(z.__,{ref:t,className:n("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=z.__.displayName;let G=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,r.jsxs)(z.ck,{ref:t,className:n("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(z.wU,{children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(z.eT,{children:a})]})});G.displayName=z.ck.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(z.Z0,{ref:t,className:n("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=z.Z0.displayName;var U=s(7907),Y=s(1231);function $(){return Math.random().toString(36).substring(2,15)}function W(e){let{selectedListId:t,setTasks:s,tasks:a,newTaskTitle:i,setNewTaskTitle:l,newTaskDescription:o,setNewTaskDescription:d,suggestedTags:n,setSuggestedTags:c,selectedTags:g,setSelectedTags:b,newTaskPriority:j,setNewTaskPriority:N,listId:w}=e,k=async e=>{let t=e.target.value;if(d(t),""!==t.trim())try{let e=await fetch("/api/suggest-tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskContent:t})});if(e.ok){let t=await e.json();c(t.tags||[])}else console.error("Failed to get tag suggestions:",e.statusText),c([])}catch(e){console.error("Error getting tag suggestions:",e),c([])}else c([])},T=e=>{g.includes(e)?b(g.filter(t=>t!==e)):b([...g,e])};return(0,r.jsxs)(f,{className:"mb-4",children:[(0,r.jsx)(m,{children:(0,r.jsx)(p,{children:"Add New Task"})}),(0,r.jsx)(x,{children:(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y,{htmlFor:"title",children:"Title"}),(0,r.jsx)(h,{type:"text",id:"title",placeholder:"Task Title",value:i,onChange:e=>l(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y,{htmlFor:"description",children:"Description"}),(0,r.jsx)(v,{id:"description",placeholder:"Task Description",value:o,onChange:k})]}),n.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)(y,{children:"Suggested Tags"}),(0,r.jsx)("div",{className:"flex gap-2",children:n.map(e=>(0,r.jsxs)(u,{variant:g.includes(e)?"default":"secondary",size:"sm",onClick:()=>T(e),children:[(0,r.jsx)(E.Z,{className:"mr-2 h-4 w-4"}),e]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y,{htmlFor:"priority",children:"Priority"}),(0,r.jsxs)(L,{onValueChange:e=>N(e),children:[(0,r.jsx)(J,{className:"w-full",children:(0,r.jsx)(P,{placeholder:"Select priority"})}),(0,r.jsxs)(B,{children:[(0,r.jsx)(G,{value:"Low",children:"Low"}),(0,r.jsx)(G,{value:"Medium",children:"Medium"}),(0,r.jsx)(G,{value:"High",children:"High"}),(0,r.jsx)(G,{value:"Critical",children:"Critical"})]})]})]}),(0,r.jsx)(u,{onClick:()=>{""!==i.trim()&&(s([...a,{id:$(),listId:t,title:i,description:o,completed:!1,priority:j,tags:g}]),l(""),d(""),c([]),b([]),N("Medium"),O({title:"Task Added!",description:"You've added \"".concat(i,'" to your task list.')}))},children:"Add Task"})]})})]})}function X(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(q,{})})}function q(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[l,o]=(0,a.useState)([]),[d,n]=(0,a.useState)([]),[c,g]=(0,a.useState)([]),[b,v]=(0,a.useState)("Medium"),[j,N]=(0,a.useState)([{id:"all",name:"All",color:"#000000"},{id:"work",name:"Work",color:"#4DB6AC"},{id:"personal",name:"Personal",color:"#FF8A65"},{id:"school",name:"School",color:"#9CCC65"}]),[k,T]=(0,a.useState)("all"),S=(0,U.useSearchParams)();(0,U.useRouter)();let[C,_]=(0,a.useState)(""),[I,A]=(0,a.useState)(!1),[z,F]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("taskflow-tasks");e&&g(JSON.parse(e))},[]),(0,a.useEffect)(()=>{localStorage.setItem("taskflow-tasks",JSON.stringify(c))},[c]),(0,a.useEffect)(()=>{let e=localStorage.getItem("listId"),t=S.get("list");if(t&&!I){let e=JSON.parse(atob(t));e=e.map(e=>({...e,id:$(),listId:localStorage.getItem("listId")||C}));let s=localStorage.getItem("taskflow-tasks"),r=s?JSON.parse(s):[];e.map(e=>e.title);let a=e.filter(e=>!r.some(t=>t.title===e.title));window.confirm("Do you want to add these tasks to your list? ")&&(g(e=>[...e,...a]),O({title:"Tasks Added!",description:"The shared tasks have been added to your list."})),A(!0)}else e||(e=(0,Y.Z)(),localStorage.setItem("listId",e));let s=e||(0,Y.Z)();_(s),T(s)},[S,C,I]);let M=e=>{g(c.filter(t=>t.id!==e))},L=(e,t)=>{g(c.map(s=>s.id===e?{...s,completed:t}:s))},P={Low:"bg-green-100 text-green-800",Medium:"bg-yellow-100 text-yellow-800",High:"bg-red-100 text-red-800",Critical:"bg-red-500 text-white"},J="all"===k?c:c.filter(e=>e.listId===k);return(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"TaskFlow"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsx)(W,{selectedListId:k,setTasks:g,tasks:c,newTaskTitle:e,setNewTaskTitle:t,newTaskDescription:s,setNewTaskDescription:i,suggestedTags:l,setSuggestedTags:o,selectedTags:d,setSelectedTags:n,newTaskPriority:b,setNewTaskPriority:v,listId:C}),(0,r.jsxs)(f,{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,r.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(p,{children:"Task List"}),(0,r.jsxs)(u,{variant:"outline",size:"sm",onClick:()=>{let e=localStorage.getItem("taskflow-tasks");if(!e){O({title:"No tasks to share!",description:"Add some tasks to your list first.",variant:"destructive"});return}try{let t=JSON.parse(e).map(e=>{let{id:t,listId:s,...r}=e;return r}),s=btoa(JSON.stringify(t)),r="".concat(window.location.origin,"?list=").concat(s);F(r),navigator.clipboard.writeText(r).then(()=>{O({title:"List Shared!",description:"The list link has been copied to your clipboard."})}).catch(e=>{console.error("Could not copy text: ",e),O({title:"Error",description:"Failed to copy the list link to clipboard.",variant:"destructive"})})}catch(e){console.error("Error sharing list:",e),O({title:"Error",description:"Failed to share the list.",variant:"destructive"})}},children:[(0,r.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),"Share List"]})]}),(0,r.jsxs)(x,{children:[z&&(0,r.jsxs)("div",{className:"mb-4 p-4 bg-secondary rounded-md flex items-center justify-between",children:[(0,r.jsx)(h,{type:"text",value:z,readOnly:!0,className:"mr-2"}),(0,r.jsxs)(u,{variant:"secondary",size:"sm",onClick:()=>{z&&navigator.clipboard.writeText(z).then(()=>{O({title:"Link Copied!",description:"The shareable link has been copied to your clipboard."})}).catch(e=>{console.error("Could not copy text: ",e),O({title:"Error",description:"Failed to copy the link to clipboard.",variant:"destructive"})})},children:[(0,r.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),"Copy"]})]}),(0,r.jsx)("div",{className:"overflow-auto",children:J.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(w,{id:e.id,checked:e.completed,onCheckedChange:t=>L(e.id,t)}),(0,r.jsx)(y,{htmlFor:e.id,className:"text-sm",children:e.title})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[e.tags.map((e,t)=>(0,r.jsxs)(u,{variant:"outline",size:"sm",children:[(0,r.jsx)(E.Z,{className:"mr-2 h-4 w-4"}),e]},t)),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(P[e.priority]),children:e.priority})]}),(0,r.jsx)(u,{variant:"destructive",size:"icon",onClick:()=>M(e.id),children:(0,r.jsx)(Z.Z,{className:"h-4 w-4"})})]},e.id))})]})]})]})]})}}},function(e){e.O(0,[17,971,69,744],function(){return e(e.s=5311)}),_N_E=e.O()}]);